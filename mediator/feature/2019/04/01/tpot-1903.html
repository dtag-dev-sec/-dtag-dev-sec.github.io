<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Release T-Pot 19.03</title>
  <meta name="description" content="" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="canonical" href="http://dtag-dev-sec.github.io//mediator/feature/2019/04/01/tpot-1903.html">

  <link rel="shortcut icon" href="/assets/images/favicon.ico">
<!--  <link rel="stylesheet" href=""> -->
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />

  <meta http-equiv="refresh" content="0; URL=https://telekom-security.github.io/2019/01/honeypot-tpot-19.03-released.html">

</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://dtag-dev-sec.github.io/" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/dtag_logo.gif)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">

        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/images/potherder/bg.jpg)">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">Release T-Pot 19.03</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/dtag_logo.gif)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Deutsche Telekom AG Honeypot Project</h4>
              on
              <time datetime="2019-04-01 11:37">01 Apr 2019</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>

        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <h1 id="t-pot-1903">T-Pot 19.03</h1>

<p>T-Pot 19.03 runs on Debian (Sid), is based heavily on</p>

<p><a href="https://www.docker.com/">docker</a>, <a href="https://docs.docker.com/compose/">docker-compose</a></p>

<p>and includes dockerized versions of the following honeypots</p>

<ul>
  <li><a href="https://github.com/huuck/ADBHoney">adbhoney</a>,</li>
  <li><a href="https://github.com/Cymmetria/ciscoasa_honeypot">ciscoasa</a>,</li>
  <li><a href="http://conpot.org/">conpot</a>,</li>
  <li><a href="https://github.com/cowrie/cowrie">cowrie</a>,</li>
  <li><a href="https://github.com/DinoTools/dionaea">dionaea</a>,</li>
  <li><a href="https://github.com/schmalle/ElasticpotPY">elasticpot</a>,</li>
  <li><a href="http://mushmush.org/">glastopf</a>,</li>
  <li><a href="https://github.com/mushorg/glutton">glutton</a>,</li>
  <li><a href="https://github.com/johnnykv/heralding">heralding</a>,</li>
  <li><a href="https://github.com/foospidy/HoneyPy">honeypy</a>,</li>
  <li><a href="https://github.com/armedpot/honeytrap/">honeytrap</a>,</li>
  <li><a href="https://github.com/awhitehatter/mailoney">mailoney</a>,</li>
  <li><a href="https://github.com/schmalle/medpot">medpot</a>,</li>
  <li><a href="https://github.com/citronneur/rdpy">rdpy</a>,</li>
  <li><a href="http://mushmush.org/">snare</a>,</li>
  <li><a href="http://mushmush.org/">tanner</a></li>
</ul>

<p>Furthermore we use the following tools</p>

<ul>
  <li><a href="https://cockpit-project.org/running">Cockpit</a> for a lightweight, webui for docker, os, real-time performance monitoring and web terminal.</li>
  <li><a href="https://gchq.github.io/CyberChef/">Cyberchef</a> a web app for encryption, encoding, compression and data analysis.</li>
  <li><a href="https://www.elastic.co/videos">ELK stack</a> to beautifully visualize all the events captured by T-Pot.</li>
  <li><a href="https://mobz.github.io/elasticsearch-head/">Elasticsearch Head</a> a web front end for browsing and interacting with an Elastic Search cluster.</li>
  <li><a href="https://github.com/smicallef/spiderfoot">Spiderfoot</a> a open source intelligence automation tool.</li>
  <li><a href="http://suricata-ids.org/">Suricata</a> a Network Security Monitoring engine.</li>
</ul>

<h1 id="tldr">TL;DR</h1>
<ol>
  <li>Meet the <a href="#requirements">system requirements</a>. The T-Pot installation needs at least 6-8 GB RAM and 128 GB free disk space as well as a working internet connection.</li>
  <li>Download the T-Pot ISO from <a href="https://github.com/dtag-dev-sec/tpotce/releases">GitHub</a> or <a href="#createiso">create it yourself</a>.</li>
  <li>Install the system in a <a href="#vm">VM</a> or on <a href="#hw">physical hardware</a> with <a href="#placement">internet access</a>.</li>
  <li>Enjoy your favorite beverage - <a href="https://sicherheitstacho.eu">watch</a> and <a href="#kibana">analyze</a>.</li>
</ol>

<h1 id="table-of-contents">Table of Contents</h1>
<ul>
  <li><a href="#changelog">Changelog</a></li>
  <li><a href="#concept">Technical Concept</a></li>
  <li><a href="#requirements">System Requirements</a></li>
  <li><a href="#installation">Installation</a>
    <ul>
      <li><a href="#prebuilt">Prebuilt ISO Image</a></li>
      <li><a href="#createiso">Create your own ISO Image</a></li>
      <li><a href="#vm">Running in a VM</a></li>
      <li><a href="#hardware">Running on Hardware</a></li>
      <li><a href="#postinstall">Post Install User</a></li>
      <li><a href="#postinstallauto">Post Install Auto</a></li>
      <li><a href="#firstrun">First Run</a></li>
      <li><a href="#placement">System Placement</a></li>
    </ul>
  </li>
  <li><a href="#updates">Updates</a></li>
  <li><a href="#options">Options</a>
    <ul>
      <li><a href="#ssh">SSH and web access</a></li>
      <li><a href="#kibana">Kibana Dashboard</a></li>
      <li><a href="#tools">Tools</a></li>
      <li><a href="#maintenance">Maintenance</a></li>
      <li><a href="#submission">Community Data Submission</a></li>
      <li><a href="#hpfeeds-optin">Opt-In HPFEEDS Data Submission</a></li>
    </ul>
  </li>
  <li><a href="#roadmap">Roadmap</a></li>
  <li><a href="#disclaimer">Disclaimer</a></li>
  <li><a href="#faq">FAQ</a></li>
  <li><a href="#contact">Contact</a></li>
  <li><a href="#licenses">Licenses</a></li>
  <li><a href="#credits">Credits</a></li>
  <li><a href="#staytuned">Stay tuned</a></li>
  <li><a href="#testimonial">Testimonial</a></li>
  <li><a href="#funfact">Fun Fact</a></li>
</ul>

<p><a name="changelog"></a></p>
<h1 id="release-notes">Release Notes</h1>
<ul>
  <li><strong>Move from Ubuntu 18.04 to Debian (Sid)</strong>
    <ul>
      <li>For almost 5 years Ubuntu LTS versions were our distributions of choice. Last year we made a design choice for T-Pot to be closer to a rolling release model and thus allowing us to issue smaller changes and releases in a more timely manner. The distribution of choice is Debian (Sid / unstable) which will provide us with the latest advancements in a Debian based distribution.</li>
    </ul>
  </li>
  <li><strong>Include HoneyPy honeypot</strong>
    <ul>
      <li><em>HoneyPy</em> is now included in the NEXTGEN installation type</li>
    </ul>
  </li>
  <li><strong>Include Suricata 4.1.3</strong>
    <ul>
      <li>Building <em>Suricata 4.1.3</em> from scratch to enable JA3 and overall better protocol support.</li>
    </ul>
  </li>
  <li><strong>Update tools to the latest versions</strong>
    <ul>
      <li>ELK Stack 6.6.2</li>
      <li>CyberChef 8.27.0</li>
      <li>SpiderFoot v3.0</li>
      <li>Cockpit 188</li>
      <li>NGINX is now built to enforce TLS 1.3 on the T-Pot WebUI</li>
    </ul>
  </li>
  <li><strong>Update honeypots</strong>
    <ul>
      <li>Where possible / feasible the honeypots have been updated to their latest versions.</li>
      <li><em>Cowrie</em> now supports <em>HASSH</em> generated hashes which allows for an easier identification of an attacker accross IP adresses.</li>
      <li><em>Heralding</em> now supports <em>SOCKS5</em> emulation.</li>
    </ul>
  </li>
  <li><strong>Update Dashboards &amp; Visualizations</strong>
    <ul>
      <li><em>Offset Dashboard</em> added to easily spot changes in attacks on a single dashboard in 24h time window.</li>
      <li><em>Cowrie Dashboard</em> modified to integrate <em>HASSH</em> support / visualizations.</li>
      <li><em>HoneyPy Dashboard</em> added to support latest honeypot addition.</li>
      <li><em>Suricata Dashboard</em> modified to integrate <em>JA3</em> support / visualizations.</li>
    </ul>
  </li>
  <li><strong>Debian mirror selection</strong>
    <ul>
      <li>During base install you now have to manually select a mirror.</li>
      <li>Upon T-Pot install the mirror closest to you will be determined automatically, <code class="language-plaintext highlighter-rouge">netselect-apt</code> requires you to allow ICMP outbound.</li>
      <li>This solves peering problems for most of the users speeding up installation and updates.</li>
    </ul>
  </li>
  <li><strong>Bugs</strong>
    <ul>
      <li>Fixed issue #298 where the import and export of objects on the shell did not work.</li>
      <li>Fixed issue #313 where Spiderfoot raised a KeyError, which was previously fixed in upstream.</li>
      <li>Fixed error in Suricata where path for reference.config changed.</li>
    </ul>
  </li>
  <li><strong>Release Cycle</strong>
    <ul>
      <li>As far as possible we will integrate changes now faster into the master branch, eliminating the need for monolithic releases. The update feature will be continuously improved on that behalf. However this might not account for all feature changes.</li>
    </ul>
  </li>
  <li><strong>HPFEEDS Opt-In</strong>
    <ul>
      <li>If you want to share your T-Pot data with a 3rd party HPFEEDS broker such as <a href="https://sissden.eu">SISSDEN</a> you can do so by creating an account at the SISSDEN portal and run <code class="language-plaintext highlighter-rouge">hpfeeds_optin.sh</code> on T-Pot.</li>
    </ul>
  </li>
  <li><strong>Update Feature</strong>
    <ul>
      <li>For the ones who like to live on the bleeding edge of T-Pot development there is now an update script available in <code class="language-plaintext highlighter-rouge">/opt/tpot/update.sh</code>.</li>
      <li>This feature is beta and is mostly intended to provide you with the latest development advances without the need of reinstalling T-Pot.</li>
    </ul>
  </li>
  <li><strong>Deprecated tools</strong>
    <ul>
      <li><em>ctop</em> will no longer be part of T-Pot.</li>
    </ul>
  </li>
  <li><strong>Fix #332</strong>
    <ul>
      <li>If T-Pot, opposed to the requirements, does not have full internet access netselect-apt fails to determine the fastest mirror as it needs ICMP and UDP outgoing. Should netselect-apt fail the default mirrors will be used.</li>
    </ul>
  </li>
  <li><strong>Improve install speed with apt-fast</strong>
    <ul>
      <li>Migrating from a stable base install to Debian (Sid) requires downloading lots of packages. Depending on your geo location the download speed was already improved by introducing netselect-apt to determine the fastest mirror. Wit
h apt-fast the downloads will be even faster by downloading packages not only in parallel but also with multiple connections per package.</li>
    </ul>
  </li>
</ul>

<p><a name="concept"></a></p>
<h1 id="technical-concept">Technical Concept</h1>

<p>T-Pot is based on the network installer Debian (Stretch). During installation the whole system will be updated to Debian (Sid).
The honeypot daemons as well as other support components being used have been containerized using <a href="http://docker.io">docker</a>.
This allows us to run multiple honeypot daemons on the same network interface while maintaining a small footprint and constrain each honeypot within its own environment.</p>

<p>In T-Pot we combine the dockerized honeypots …</p>
<ul>
  <li><a href="https://github.com/huuck/ADBHoney">adbhoney</a>,</li>
  <li><a href="https://github.com/Cymmetria/ciscoasa_honeypot">ciscoasa</a>,</li>
  <li><a href="http://conpot.org/">conpot</a>,</li>
  <li><a href="http://www.micheloosterhof.com/cowrie/">cowrie</a>,</li>
  <li><a href="https://github.com/DinoTools/dionaea">dionaea</a>,</li>
  <li><a href="https://github.com/schmalle/ElasticPot">elasticpot</a>,</li>
  <li><a href="http://mushmush.org/">glastopf</a>,</li>
  <li><a href="https://github.com/mushorg/glutton">glutton</a>,</li>
  <li><a href="https://github.com/johnnykv/heralding">heralding</a>,</li>
  <li><a href="https://github.com/foospidy/HoneyPy">honeypy</a>,</li>
  <li><a href="https://github.com/armedpot/honeytrap/">honeytrap</a>,</li>
  <li><a href="https://github.com/awhitehatter/mailoney">mailoney</a>,</li>
  <li><a href="https://github.com/schmalle/medpot">medpot</a>,</li>
  <li><a href="https://github.com/citronneur/rdpy">rdpy</a>,</li>
  <li><a href="http://mushmush.org/">snare</a>,</li>
  <li><a href="http://mushmush.org/">tanner</a></li>
</ul>

<p>… with the following tools …</p>
<ul>
  <li><a href="https://cockpit-project.org/running">Cockpit</a> for a lightweight, webui for docker, os, real-time performance monitoring and web terminal.</li>
  <li><a href="https://gchq.github.io/CyberChef/">Cyberchef</a> a web app for encryption, encoding, compression and data analysis.</li>
  <li><a href="https://www.elastic.co/videos">ELK stack</a> to beautifully visualize all the events captured by T-Pot.</li>
  <li><a href="https://mobz.github.io/elasticsearch-head/">Elasticsearch Head</a> a web front end for browsing and interacting with an Elastic Search cluster.</li>
  <li><a href="https://github.com/smicallef/spiderfoot">Spiderfoot</a> a open source intelligence automation tool.</li>
  <li><a href="http://suricata-ids.org/">Suricata</a> a Network Security Monitoring engine.</li>
</ul>

<p>… to give you the best out-of-the-box experience possible and an easy-to-use multi-honeypot appliance.</p>

<p><img src="/assets/images/architecture.png" alt="Architecture" /></p>

<p>While data within docker containers is volatile we do ensure a default 30 day persistence of all relevant honeypot and tool data in the well known <code class="language-plaintext highlighter-rouge">/data</code> folder and sub-folders. The persistence configuration may be adjusted in <code class="language-plaintext highlighter-rouge">/opt/tpot/etc/logrotate/logrotate.conf</code>. Once a docker container crashes, all other data produced within its environment is erased and a fresh instance is started from the corresponding docker image.<br /></p>

<p>Basically, what happens when the system is booted up is the following:</p>

<ul>
  <li>start host system</li>
  <li>start all the necessary services (i.e. cockpit, docker, etc.)</li>
  <li>start all docker containers via docker-compose (honeypots, nms, elk, etc.)</li>
</ul>

<p>Within the T-Pot project, we provide all the tools and documentation necessary to build your own honeypot system and contribute to our <a href="https://sicherheitstacho.eu">Sicherheitstacho</a>.</p>

<p>The source code and configuration files are fully stored in the T-Pot GitHub repository. The docker images are pre-configured for the T-Pot environment. If you want to run the docker images separately, make sure you study the docker-compose configuration (<code class="language-plaintext highlighter-rouge">/opt/tpot/etc/tpot.yml</code>) and the T-Pot systemd script (<code class="language-plaintext highlighter-rouge">/etc/systemd/system/tpot.service</code>), as they provide a good starting point for implementing changes.</p>

<p>The individual docker configurations are located in the <a href="https://github.com/dtag-dev-sec/tpotce/tree/master/docker">docker folder</a>.</p>

<p><a name="requirements"></a></p>
<h1 id="system-requirements">System Requirements</h1>
<p>Depending on your installation type, whether you install on <a href="#hardware">real hardware</a> or in a <a href="#vm">virtual machine</a>, make sure your designated T-Pot system meets the following requirements:</p>

<h5 id="standard-installation">Standard Installation</h5>
<ul>
  <li>Honeypots: adbhoney, ciscoasa, conpot, cowrie, dionaea, elasticpot, heralding, honeytrap, mailoney, medpot, rdpy, snare &amp; tanner</li>
  <li>
    <p>Tools: cockpit, cyberchef, ELK, elasticsearch head, ewsposter, NGINX, spiderfoot, p0f and suricata</p>
  </li>
  <li>6-8 GB RAM (less RAM is possible but might introduce swapping)</li>
  <li>128 GB SSD (smaller is possible but limits the capacity of storing events)</li>
  <li>Network via DHCP</li>
  <li>A working, non-proxied, internet connection</li>
</ul>

<h5 id="sensor-installation">Sensor Installation</h5>
<ul>
  <li>Honeypots: adbhoney, ciscoasa, conpot, cowrie, dionaea, elasticpot, heralding, honeytrap, mailoney, medpot, rdpy, snare &amp; tanner</li>
  <li>
    <p>Tools: cockpit</p>
  </li>
  <li>6-8 GB RAM (less RAM is possible but might introduce swapping)</li>
  <li>128 GB SSD (smaller is possible but limits the capacity of storing events)</li>
  <li>Network via DHCP</li>
  <li>A working, non-proxied, internet connection</li>
</ul>

<h5 id="industrial-installation">Industrial Installation</h5>
<ul>
  <li>Honeypots: conpot, cowrie, heralding, medpot, rdpy</li>
  <li>
    <p>Tools: cockpit, cyberchef, ELK, elasticsearch head, ewsposter, NGINX, spiderfoot, p0f and suricata</p>
  </li>
  <li>6-8 GB RAM (less RAM is possible but might introduce swapping)</li>
  <li>128 GB SSD (smaller is possible but limits the capacity of storing events)</li>
  <li>Network via DHCP</li>
  <li>A working, non-proxied, internet connection</li>
</ul>

<h5 id="collector-installation-because-sometimes-all-you-want-to-do-is-catching-credentials">Collector Installation (because sometimes all you want to do is catching credentials)</h5>
<ul>
  <li>Honeypots: heralding</li>
  <li>
    <p>Tools: cockpit, cyberchef, ELK, elasticsearch head, ewsposter, NGINX, spiderfoot, p0f and suricata</p>
  </li>
  <li>6-8 GB RAM (less RAM is possible but might introduce swapping)</li>
  <li>128 GB SSD (smaller is possible but limits the capacity of storing events)</li>
  <li>Network via DHCP</li>
  <li>A working, non-proxied, internet connection</li>
</ul>

<h5 id="nextgen-installation-glutton-replacing-honeytrap-honeypy-replacing-elasticpot">NextGen Installation (Glutton replacing Honeytrap, HoneyPy replacing Elasticpot)</h5>
<ul>
  <li>Honeypots: adbhoney, ciscoasa, conpot, cowrie, dionaea, glutton, heralding, honeypy, mailoney, rdpy, snare &amp; tanner</li>
  <li>
    <p>Tools: cockpit, cyberchef, ELK, elasticsearch head, ewsposter, NGINX, spiderfoot, p0f and suricata</p>
  </li>
  <li>6-8 GB RAM (less RAM is possible but might introduce swapping)</li>
  <li>128 GB SSD (smaller is possible but limits the capacity of storing events)</li>
  <li>Network via DHCP</li>
  <li>A working, non-proxied, internet connection</li>
</ul>

<p><a name="installation"></a></p>
<h1 id="installation">Installation</h1>
<p>The installation of T-Pot is straight forward and heavily depends on a working, transparent and non-proxied up and running internet connection. Otherwise the installation <strong>will fail!</strong></p>

<p>Firstly, decide if you want to download our prebuilt installation ISO image from <a href="https://github.com/dtag-dev-sec/tpotce/releases">GitHub</a>, <a href="#createiso">create it yourself</a> <strong><em>or</em></strong> <a href="#postinstall">post-install on an existing Debian 9.7 (Stretch)</a>.</p>

<p>Secondly, decide where you want to let the system run: <a href="#hardware">real hardware</a> or in a <a href="#vm">virtual machine</a>?</p>

<p><a name="prebuilt"></a></p>
<h2 id="prebuilt-iso-image">Prebuilt ISO Image</h2>
<p>We provide an installation ISO image for download (~50MB), which is created using the same <a href="https://github.com/dtag-dev-sec/tpotce">tool</a> you can use yourself in order to create your own image. It will basically just save you some time downloading components and creating the ISO image.
You can download the prebuilt installation image from <a href="https://github.com/dtag-dev-sec/tpotce/releases">GitHub</a> and jump to the <a href="#vm">installation</a> section.</p>

<p><a name="createiso"></a></p>
<h2 id="create-your-own-iso-image">Create your own ISO Image</h2>
<p>For transparency reasons and to give you the ability to customize your install, we provide you the <a href="https://github.com/dtag-dev-sec/tpotce">ISO Creator</a> that enables you to create your own ISO installation image.</p>

<p><strong>Requirements to create the ISO image:</strong></p>
<ul>
  <li>Debian 9.7 or newer as host system (others <em>may</em> work, but <em>remain</em> untested)</li>
  <li>4GB of free memory</li>
  <li>32GB of free storage</li>
  <li>A working internet connection</li>
</ul>

<p><strong>How to create the ISO image:</strong></p>

<ol>
  <li>Clone the repository and enter it.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/dtag-dev-sec/tpotce
cd tpotce
</code></pre></div>    </div>
  </li>
  <li>Invoke the script that builds the ISO image.
The script will download and install dependencies necessary to build the image on the invoking machine. It will further download the ubuntu network installer image (~50MB) which T-Pot is based on.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ./makeiso.sh
</code></pre></div>    </div>
    <p>After a successful build, you will find the ISO image <code class="language-plaintext highlighter-rouge">tpot.iso</code> along with a SHA256 checksum <code class="language-plaintext highlighter-rouge">tpot.sha256</code> in your directory.</p>
  </li>
</ol>

<p><a name="vm"></a></p>
<h2 id="running-in-vm">Running in VM</h2>
<p>You may want to run T-Pot in a virtualized environment. The virtual system configuration depends on your virtualization provider.</p>

<p>We successfully tested T-Pot with <a href="https://www.virtualbox.org">VirtualBox</a> and <a href="http://www.vmware.com">VMWare</a> with just little modifications to the default machine configurations.</p>

<p>It is important to make sure you meet the <a href="#requirements">system requirements</a> and assign a virtual harddisk and RAM according to the requirements while making sure networking is bridged.</p>

<p>You need to enable promiscuous mode for the network interface for suricata and p0f to work properly. Make sure you enable it during configuration.</p>

<p>If you want to use a wifi card as a primary NIC for T-Pot, please be aware of the fact that not all network interface drivers support all wireless cards. E.g. in VirtualBox, you then have to choose the <em>“MT SERVER”</em> model of the NIC.</p>

<p>Lastly, mount the <code class="language-plaintext highlighter-rouge">tpot.iso</code> ISO to the VM and continue with the installation.<br /></p>

<p>You can now jump <a href="#firstrun">here</a>.</p>

<p><a name="hardware"></a></p>
<h2 id="running-on-hardware">Running on Hardware</h2>
<p>If you decide to run T-Pot on dedicated hardware, just follow these steps:</p>

<ol>
  <li>Burn a CD from the ISO image or make a bootable USB stick using the image. <br />
Whereas most CD burning tools allow you to burn from ISO images, the procedure to create a bootable USB stick from an ISO image depends on your system. There are various Windows GUI tools available, e.g. <a href="http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-windows">this tip</a> might help you.<br /> On <a href="http://askubuntu.com/questions/59551/how-to-burn-a-iso-to-a-usb-device">Linux</a> or <a href="http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx">MacOS</a> you can use the tool <em>dd</em> or create the USB stick with T-Pot’s <a href="https://github.com/dtag-dev-sec">ISO Creator</a>.</li>
  <li>Boot from the USB stick and install.</li>
</ol>

<p><em>Please note</em>: While we are performing limited tests with the Intel NUC platform other hardware platforms <strong>remain untested</strong>. We can not provide hardware support of any kind.</p>

<p><a name="postinstall"></a></p>
<h2 id="post-install-user">Post-Install User</h2>
<p>In some cases it is necessary to install Debian 9.7 (Stretch) on your own:</p>
<ul>
  <li>Cloud provider does not offer mounting ISO images.</li>
  <li>Hardware setup needs special drivers and / or kernels.</li>
  <li>Within your company you have to setup special policies, software etc.</li>
  <li>You just like to stay on top of things.</li>
</ul>

<p>The T-Pot Universal Installer will upgrade the system to Debian (Sid) and install all required T-Pot dependencies.</p>

<p>Just follow these steps:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/dtag-dev-sec/tpotce
cd tpotce/iso/installer/
./install.sh --type=user
</code></pre></div></div>

<p>The installer will now start and guide you through the install process.</p>

<p><a name="postinstallauto"></a></p>
<h2 id="post-install-auto">Post-Install Auto</h2>
<p>You can also let the installer run automatically if you provide your own <code class="language-plaintext highlighter-rouge">tpot.conf</code>. An example is available in <code class="language-plaintext highlighter-rouge">tpotce/iso/installer/tpot.conf.dist</code>. This should make things easier in case you want to automate the installation i.e. with <strong>Ansible</strong>.</p>

<p>Just follow these steps while adjusting <code class="language-plaintext highlighter-rouge">tpot.conf</code> to your needs:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/dtag-dev-sec/tpotce
cd tpotce/iso/installer/
cp tpot.conf.dist tpot.conf
./install.sh --type=auto --conf=tpot.conf
</code></pre></div></div>

<p>The installer will start automatically and guide you through the install process.</p>

<p><a name="firstrun"></a></p>
<h2 id="first-run">First Run</h2>
<p>The installation requires very little interaction, only a locale and keyboard setting have to be answered for the basic linux installation. The system will reboot and please maintain the active internet connection. The T-Pot installer will start and ask you for an installation type, password for the <strong>tsec</strong> user and credentials for a <strong>web user</strong>. Everything else will be configured automatically. All docker images and other componenents will be downloaded. Depending on your network connection and the chosen installation type, the installation may take some time. During our tests (250Mbit down, 40Mbit up), the installation was usually finished within a 15-30 minute timeframe.</p>

<p>Once the installation is finished, the system will automatically reboot and you will be presented with the T-Pot login screen. On the console you may login with:</p>

<ul>
  <li>user: <strong>[tsec or user]</strong> <em>you chose during one of the post install methods</em></li>
  <li>pass: <strong>[password]</strong> <em>you chose during the installation</em></li>
</ul>

<p>All honeypot services are preconfigured and are starting automatically.</p>

<p>You can login from your browser and access the Admin UI: <code class="language-plaintext highlighter-rouge">https://&lt;your.ip&gt;:64294</code> or via SSH to access the command line: <code class="language-plaintext highlighter-rouge">ssh -l tsec -p 64295 &lt;your.ip&gt;</code></p>

<ul>
  <li>user: <strong>[tsec or user]</strong> <em>you chose during one of the post install methods</em></li>
  <li>pass: <strong>[password]</strong> <em>you chose during the installation</em></li>
</ul>

<p>You can also login from your browser and access the Web UI: <code class="language-plaintext highlighter-rouge">https://&lt;your.ip&gt;:64297</code></p>
<ul>
  <li>user: <strong>[user]</strong> <em>you chose during the installation</em></li>
  <li>pass: <strong>[password]</strong> <em>you chose during the installation</em></li>
</ul>

<p><a name="placement"></a></p>
<h1 id="system-placement">System Placement</h1>
<p>Make sure your system is reachable through a network you suspect intruders in / from (i.e. the internet). Otherwise T-Pot will most likely not capture any attacks, other than the ones from your  internal network! We recommend you put it in an unfiltered zone, where all TCP and UDP traffic is forwarded to T-Pot’s network interface. However to avoid fingerprinting you can put T-Pot behind a firewall and forward all TCP / UDP traffic in the port range of 1-64000 to T-Pot while allowing access to ports &gt; 64000 only from trusted IPs.</p>

<p>A list of all relevant ports is available as part of the <a href="#concept">Technical Concept</a>
<br /></p>

<p>Basically, you can forward as many TCP ports as you want, as honeytrap dynamically binds any TCP port that is not covered by the other honeypot daemons.</p>

<p>In case you need external Admin UI access, forward TCP port 64294 to T-Pot, see below.
In case you need external SSH access, forward TCP port 64295 to T-Pot, see below.
In case you need external Web UI access, forward TCP port 64297 to T-Pot, see below.</p>

<p>T-Pot requires outgoing git, http, https connections for updates (Debian, Docker, GitHub, PyPi) and attack submission (ewsposter, hpfeeds). Ports and availability may vary based on your geographical location.</p>

<p><a name="updates"></a></p>
<h1 id="updates">Updates</h1>
<p>For the ones of you who want to live on the bleeding edge of T-Pot development we introduced an update feature which will allow you to update all T-Pot relevant files to be up to date with the T-Pot master branch.
<strong>If you made any relevant changes to the T-Pot relevant config files make sure to create a backup first.</strong></p>
<ul>
  <li>The Update script will</li>
  <li><strong>merciless</strong> overwrite local changes to be in sync with the T-Pot master branch</li>
  <li>upgrade the system to the packages available in Debian (Sid)</li>
  <li>update all resources to be in-sync with the T-Pot master branch</li>
  <li>ensure all T-Pot relevant system files will be patched / copied into the original T-Pot state</li>
</ul>

<p>You simply run the update script:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /opt/tpot/
./update.sh -y
</code></pre></div></div>

<p><strong>Despite all our efforts please be reminded that updates sometimes may have unforeseen consequences. Please create a backup of the machine or the files with the most value to your work.</strong></p>

<p><a name="options"></a></p>
<h1 id="options">Options</h1>
<p>The system is designed to run without any interaction or maintenance and automatically contributes to the community.<br />
We know, for some this may not be enough. So here come some ways to further inspect the system and change configuration parameters.</p>

<p><a name="ssh"></a></p>
<h2 id="ssh-and-web-access">SSH and web access</h2>
<p>By default, the SSH daemon allows access on <strong>tcp/64295</strong> with a user / password combination and prevents credential brute forcing attempts using <code class="language-plaintext highlighter-rouge">fail2ban</code>. This also counts for Admin UI (<strong>tcp/64294</strong>) and Web UI (<strong>tcp/64297</strong>) access.<br /></p>

<p>If you do not have a SSH client at hand and still want to access the machine via command line you can do so by accessing the Admin UI from <code class="language-plaintext highlighter-rouge">https://&lt;your.ip&gt;:64294</code>, enter</p>

<ul>
  <li>user: <strong>[tsec or user]</strong> <em>you chose during one of the post install methods</em></li>
  <li>pass: <strong>[password]</strong> <em>you chose during the installation</em></li>
</ul>

<p><img src="/assets/images/cockpit3.png" alt="Cockpit Terminal" /></p>

<p><a name="kibana"></a></p>
<h2 id="kibana-dashboard">Kibana Dashboard</h2>
<p>Just open a web browser and connect to <code class="language-plaintext highlighter-rouge">https://&lt;your.ip&gt;:64297</code>, enter</p>

<ul>
  <li>user: <strong>[user]</strong> <em>you chose during the installation</em></li>
  <li>pass: <strong>[password]</strong> <em>you chose during the installation</em></li>
</ul>

<p>and <strong>Kibana</strong> will automagically load. The Kibana dashboard can be customized to fit your needs. By default, we haven’t added any filtering, because the filters depend on your setup. E.g. you might want to filter out your incoming administrative ssh connections and connections to update servers.</p>

<p><img src="/assets/images/kibana.png" alt="Dashbaord" /></p>

<p><a name="tools"></a></p>
<h2 id="tools">Tools</h2>
<p>We included some web based management tools to improve and ease up on your daily tasks.</p>

<p><img src="/assets/images/cockpit1.png" alt="Cockpit Overview" /></p>

<p><img src="/assets/images/cockpit2.png" alt="Cockpit Containers" /></p>

<p><img src="/assets/images/cyberchef.png" alt="Cyberchef" /></p>

<p><img src="/assets/images/spiderfoot.png" alt="ES Head Plugin" /></p>

<p><img src="/assets/images/spiderfoot.png" alt="Spiderfoot" /></p>

<p><a name="maintenance"></a></p>
<h2 id="maintenance">Maintenance</h2>
<p>As mentioned before, the system is designed to be low maintenance. Basically, there is nothing you have to do but let it run.</p>

<p>If you run into any problems, a reboot may fix it :bowtie:</p>

<p>If new versions of the components involved appear, we will test them and build new docker images. Those new docker images will be pushed to docker hub and downloaded to T-Pot and activated accordingly.</p>

<p><a name="submission"></a></p>
<h2 id="community-data-submission">Community Data Submission</h2>
<p>We provide T-Pot in order to make it accessible to all parties interested in honeypot deployment. By default, the captured data is submitted to a community backend. This community backend uses the data to feed <a href="https://sicherheitstacho.eu">Sicherheitstacho</a>.
You may opt out of the submission by removing the <code class="language-plaintext highlighter-rouge"># Ewsposter service</code> from <code class="language-plaintext highlighter-rouge">/opt/tpot/etc/tpot.yml</code>:</p>
<ol>
  <li>Stop T-Pot services: <code class="language-plaintext highlighter-rouge">systemctl stop tpot</code></li>
  <li>Remove Ewsposter service: <code class="language-plaintext highlighter-rouge">vi /opt/tpot/etc/tpot.yml</code></li>
  <li>Remove the following lines, save and exit vi (<code class="language-plaintext highlighter-rouge">:x!</code>):<br />
```
    <h1 id="ewsposter-service">Ewsposter service</h1>
    <p>ewsposter:
 container_name: ewsposter
 restart: always
 networks:</p>
    <ul>
      <li>ewsposter_local
 image: “dtagdevsec/ewsposter:1903”
 volumes:</li>
      <li>/data:/data</li>
      <li>/data/ews/conf/ews.ip:/opt/ewsposter/ews.ip
```</li>
    </ul>
  </li>
  <li>Start T-Pot services: <code class="language-plaintext highlighter-rouge">systemctl start tpot</code></li>
</ol>

<p>Data is submitted in a structured ews-format, a XML stucture. Hence, you can parse out the information that is relevant to you.</p>

<p>We encourage you not to disable the data submission as it is the main purpose of the community approach - as you all know <strong>sharing is caring</strong> 😍</p>

<p><a name="hpfeeds-optin"></a></p>
<h2 id="opt-in-hpfeeds-data-submission">Opt-In HPFEEDS Data Submission</h2>
<p>As an Opt-In it is now possible to also share T-Pot data with 3rd party HPFEEDS brokers, such as <a href="https://sissden.eu">SISSDEN</a>.
If you want to share your T-Pot data you simply have to register an account with a 3rd party broker with its own benefits towards the community. Once registered you will receive your credentials to share events with the broker. In T-Pot you simply run <code class="language-plaintext highlighter-rouge">hpfeeds_optin.sh</code> which will ask for your credentials, in case of SISSDEN this is just <code class="language-plaintext highlighter-rouge">Ident</code> and <code class="language-plaintext highlighter-rouge">Secret</code>, everything else is pre-configured. It will automatically update <code class="language-plaintext highlighter-rouge">/opt/tpot/etc/tpot.yml</code> to deliver events to your desired broker.</p>

<p><a name="roadmap"></a></p>
<h1 id="roadmap">Roadmap</h1>
<p>As with every development there is always room for improvements …</p>

<p>Some features may be provided with updated docker images, others may require some hands on from your side.</p>

<p>You are always invited to participate in development on our <a href="https://github.com/dtag-dev-sec/tpotce">GitHub</a> page.</p>

<p><a name="disclaimer"></a></p>
<h1 id="disclaimer">Disclaimer</h1>
<ul>
  <li>We don’t have access to your system. So we cannot remote-assist when you break your configuration. But you can simply reinstall.</li>
  <li>The software was designed with best effort security, not to be in stealth mode. Because then, we probably would not be able to provide those kind of honeypot services.</li>
  <li>You install and you run within your responsibility. Choose your deployment wisely as a system compromise can never be ruled out.</li>
  <li>Honeypots should - by design - may not host any sensitive data. Make sure you don’t add any.</li>
  <li>By default, your data is submitted to the community dashboard. You can disable this in the config. But hey, wouldn’t it be better to contribute to the community?</li>
</ul>

<p><a name="faq"></a></p>
<h1 id="faq">FAQ</h1>
<p>Please report any issues or questions on our <a href="https://github.com/dtag-dev-sec/tpotce/issues">GitHub issue list</a>, so the community can participate.</p>

<p><a name="contact"></a></p>
<h1 id="contact">Contact</h1>
<p>We provide the software <strong>as is</strong> in a Community Edition format. T-Pot is designed to run out of the box and with zero maintenance involved. <br />
We hope you understand that we cannot provide support on an individual basis. We will try to address questions, bugs and problems on our <a href="https://github.com/dtag-dev-sec/tpotce/issues">GitHub issue list</a>.</p>

<p><a name="licenses"></a></p>
<h1 id="licenses">Licenses</h1>
<p>The software that T-Pot is built on uses the following licenses.
<br />GPLv2: <a href="https://github.com/mushorg/conpot/blob/master/LICENSE.txt">conpot</a>, <a href="https://github.com/DinoTools/dionaea/blob/master/LICENSE">dionaea</a>, <a href="https://github.com/foospidy/HoneyPy/blob/master/LICENSE">honeypy</a>, <a href="https://github.com/armedpot/honeytrap/blob/master/LICENSE">honeytrap</a>, <a href="http://suricata-ids.org/about/open-source/">suricata</a>
<br />GPLv3: <a href="https://github.com/huuck/ADBHoney">adbhoney</a>, <a href="https://github.com/schmalle/ElasticPot">elasticpot</a>, <a href="https://github.com/dtag-dev-sec/ews/">ewsposter</a>, <a href="https://github.com/glastopf/glastopf/blob/master/GPL">glastopf</a>, <a href="https://github.com/citronneur/rdpy/blob/master/LICENSE">rdpy</a>, <a href="https://github.com/johnnykv/heralding/blob/master/LICENSE.txt">heralding</a>, <a href="https://github.com/mushorg/snare/blob/master/LICENSE">snare</a>, <a href="https://github.com/mushorg/snare/blob/master/LICENSE">tanner</a>
<br />Apache 2 License: <a href="https://github.com/gchq/CyberChef/blob/master/LICENSE">cyberchef</a>, <a href="https://github.com/elasticsearch/elasticsearch/blob/master/LICENSE.txt">elasticsearch</a>, <a href="https://github.com/elasticsearch/logstash/blob/master/LICENSE">logstash</a>, <a href="https://github.com/elasticsearch/kibana/blob/master/LICENSE.md">kibana</a>, <a href="https://github.com/docker/docker/blob/master/LICENSE">docker</a>, <a href="https://github.com/mobz/elasticsearch-head/blob/master/LICENCE">elasticsearch-head</a>
<br />MIT license: <a href="https://github.com/Cymmetria/ciscoasa_honeypot/blob/master/LICENSE">ciscoasa</a>, <a href="https://github.com/mushorg/glutton/blob/master/LICENSE">glutton</a>
<br /> Other: <a href="https://github.com/micheloosterhof/cowrie/blob/master/LICENSE.md">cowrie</a>, <a href="https://github.com/awhitehatter/mailoney">mailoney</a>, <a href="https://www.debian.org/legal/licenses/">Debian licensing</a></p>

<p><a name="credits"></a></p>
<h1 id="credits">Credits</h1>
<p>Without open source and the fruitful development community (we are proud to be a part of), T-Pot would not have been possible! Our thanks are extended but not limited to the following people and organizations:</p>

<h3 id="the-developers-and-development-communities-of">The developers and development communities of</h3>

<ul>
  <li><a href="https://github.com/huuck/ADBHoney/graphs/contributors">adbhoney</a></li>
  <li><a href="https://github.com/ilikenwf/apt-fast/graphs/contributors">apt-fast</a></li>
  <li><a href="https://github.com/Cymmetria/ciscoasa_honeypot/graphs/contributors">ciscoasa</a></li>
  <li><a href="https://github.com/cockpit-project/cockpit/graphs/contributors">cockpit</a></li>
  <li><a href="https://github.com/mushorg/conpot/graphs/contributors">conpot</a></li>
  <li><a href="https://github.com/micheloosterhof/cowrie/graphs/contributors">cowrie</a></li>
  <li><a href="http://www.debian.org/">debian</a></li>
  <li><a href="https://github.com/DinoTools/dionaea/graphs/contributors">dionaea</a></li>
  <li><a href="https://github.com/docker/docker/graphs/contributors">docker</a></li>
  <li><a href="https://github.com/schmalle/ElasticpotPY/graphs/contributors">elasticpot</a></li>
  <li><a href="https://github.com/elastic/elasticsearch/graphs/contributors">elasticsearch</a></li>
  <li><a href="https://github.com/mobz/elasticsearch-head/graphs/contributors">elasticsearch-head</a></li>
  <li><a href="https://github.com/armedpot/ewsposter/graphs/contributors">ewsposter</a></li>
  <li><a href="https://github.com/mushorg/glastopf/graphs/contributors">glastopf</a></li>
  <li><a href="https://github.com/mushorg/glutton/graphs/contributors">glutton</a></li>
  <li><a href="https://github.com/johnnykv/heralding/graphs/contributors">heralding</a></li>
  <li><a href="https://github.com/foospidy/HoneyPy/graphs/contributors">honeypy</a></li>
  <li><a href="https://github.com/armedpot/honeytrap/graphs/contributors">honeytrap</a></li>
  <li><a href="https://github.com/elastic/kibana/graphs/contributors">kibana</a></li>
  <li><a href="https://github.com/elastic/logstash/graphs/contributors">logstash</a></li>
  <li><a href="https://github.com/awhitehatter/mailoney">mailoney</a></li>
  <li><a href="https://github.com/schmalle/medpot/graphs/contributors">medpot</a></li>
  <li><a href="http://lcamtuf.coredump.cx/p0f3/">p0f</a></li>
  <li><a href="https://github.com/citronneur/rdpy">rdpy</a></li>
  <li><a href="https://github.com/smicallef/spiderfoot">spiderfoot</a></li>
  <li><a href="https://github.com/mushorg/snare/graphs/contributors">snare</a></li>
  <li><a href="https://github.com/mushorg/tanner/graphs/contributors">tanner</a></li>
  <li><a href="https://github.com/inliniac/suricata/graphs/contributors">suricata</a></li>
</ul>

<h3 id="the-following-companies-and-organizations">The following companies and organizations</h3>
<ul>
  <li><a href="https://www.debian.org/">debian</a></li>
  <li><a href="https://www.docker.com/">docker</a></li>
  <li><a href="https://www.elastic.co/">elastic.io</a></li>
  <li><a href="https://www.honeynet.org/">honeynet project</a></li>
  <li><a href="http://www.intel.com">intel</a></li>
</ul>

<h3 id="-and-of-course-you-for-joining-the-community">… and of course <strong><em>you</em></strong> for joining the community!</h3>

<p><a name="staytuned"></a></p>
<h1 id="stay-tuned-">Stay tuned …</h1>
<p>We will be releasing a new version of T-Pot about every 6-12 months.</p>

<p><a name="testimonial"></a></p>
<h1 id="testimonial">Testimonial</h1>
<p>One of the greatest feedback we have gotten so far is by one of the Conpot developers:<br />
<strong><em>“[…] I highly recommend T-Pot which is … it’s not exactly a swiss army knife .. it’s more like a swiss army soldier, equipped with a swiss army knife. Inside a tank. A swiss tank. […]”</em></strong></p>

<p><a name="funfact"></a></p>
<h1 id="fun-fact">Fun Fact</h1>

<p>In an effort of saving the environment we are now brewing our own Mate Ice Tea and consumed 73 liters so far for the T-Pot 19.03 development 😇</p>

        </section>
        <footer class="post-footer">
          <section class="share">



          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/dtag_logo.gif)">Blog Logo</div>
              <h4>Deutsche Telekom AG Honeypot Project</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2019-04-01 11:37">01 Apr 2019</time></p>
            </section>
          </div>

          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Deutsche Telekom AG Honeypot Project</a> &copy; 2020<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/tsy.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">DTAG Community Honeypot Project</h1>
        <h2 class="blog-description"></h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>


  </body>
</html>
